<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monthly Salary Conversion Test</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif; margin: 20px; }
        .container { max-width: 600px; margin: 0 auto; }
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 5px; font-weight: 500; }
        input { width: 100%; padding: 10px; border: 2px solid #e5e7eb; border-radius: 6px; }
        .annual-display { margin-top: 5px; color: #2563eb; font-weight: 500; }
        .summary { background: #f0f9ff; padding: 20px; border-radius: 8px; margin-top: 20px; }
        .test-cases { background: #f9fafb; padding: 20px; border-radius: 8px; margin-top: 20px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸ§ª Monthly Salary to Annual Conversion Test</h1>
        <p>This test demonstrates the automatic conversion from monthly salary to annual salary for tax calculations.</p>

        <div class="form-group">
            <label for="monthly_salary">Monthly Salary (PKR):</label>
            <input type="number" id="monthly_salary" placeholder="Enter monthly salary" oninput="updateCalculations()">
            <div id="annual_display" class="annual-display"></div>
        </div>

        <div class="summary">
            <h3>Tax Calculation Summary</h3>
            <div id="tax_summary">
                <p>Enter a monthly salary above to see tax calculations</p>
            </div>
        </div>

        <div class="test-cases">
            <h3>Quick Test Cases</h3>
            <button onclick="testCase(100000)">PKR 100,000/month</button>
            <button onclick="testCase(150000)">PKR 150,000/month</button>
            <button onclick="testCase(200000)">PKR 200,000/month</button>
            <button onclick="testCase(300000)">PKR 300,000/month</button>
        </div>
    </div>

    <script>
        function updateCalculations() {
            const monthly_salary = parseFloat(document.getElementById('monthly_salary').value) || 0;
            const annual_salary = monthly_salary * 12;
            
            // Update annual display
            const annualDisplay = document.getElementById('annual_display');
            if (monthly_salary > 0) {
                annualDisplay.innerHTML = `Annual: ${formatCurrency(annual_salary)}`;
                annualDisplay.style.display = 'block';
            } else {
                annualDisplay.style.display = 'none';
            }
            
            // Update tax summary
            updateTaxSummary(annual_salary);
        }

        function updateTaxSummary(annual_salary) {
            const summaryDiv = document.getElementById('tax_summary');
            
            if (annual_salary <= 0) {
                summaryDiv.innerHTML = '<p>Enter a monthly salary above to see tax calculations</p>';
                return;
            }

            // Simplified Pakistani tax calculation for demonstration
            let tax = 0;
            let taxableIncome = annual_salary;
            let breakdown = '';

            if (taxableIncome <= 600000) {
                tax = 0;
                breakdown = 'Tax Rate: 0% (Up to PKR 600,000)';
            } else if (taxableIncome <= 1200000) {
                tax = (taxableIncome - 600000) * 0.05;
                breakdown = 'Tax Rate: 5% on amount above PKR 600,000';
            } else if (taxableIncome <= 2200000) {
                tax = 30000 + (taxableIncome - 1200000) * 0.125;
                breakdown = 'Tax Rate: 12.5% on amount above PKR 1,200,000 + PKR 30,000';
            } else if (taxableIncome <= 3200000) {
                tax = 155000 + (taxableIncome - 2200000) * 0.20;
                breakdown = 'Tax Rate: 20% on amount above PKR 2,200,000 + PKR 155,000';
            } else if (taxableIncome <= 4100000) {
                tax = 355000 + (taxableIncome - 3200000) * 0.25;
                breakdown = 'Tax Rate: 25% on amount above PKR 3,200,000 + PKR 355,000';
            } else {
                tax = 580000 + (taxableIncome - 4100000) * 0.35;
                breakdown = 'Tax Rate: 35% on amount above PKR 4,100,000 + PKR 580,000';
            }

            const netIncome = annual_salary - tax;
            const effectiveRate = (tax / annual_salary * 100).toFixed(2);

            summaryDiv.innerHTML = `
                <p><strong>Annual Salary:</strong> ${formatCurrency(annual_salary)}</p>
                <p><strong>Annual Tax:</strong> ${formatCurrency(tax)}</p>
                <p><strong>Net Annual Income:</strong> ${formatCurrency(netIncome)}</p>
                <p><strong>Effective Tax Rate:</strong> ${effectiveRate}%</p>
                <p><em>${breakdown}</em></p>
            `;
        }

        function testCase(monthlySalary) {
            document.getElementById('monthly_salary').value = monthlySalary;
            updateCalculations();
        }

        function formatCurrency(amount) {
            return new Intl.NumberFormat('en-PK', {
                style: 'currency',
                currency: 'PKR',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(amount);
        }

        // Initialize
        updateCalculations();
    </script>
</body>
</html>